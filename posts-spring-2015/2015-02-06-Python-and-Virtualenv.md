---
layout: post
title: Python and Virtualenv
summary:
status: draft
hn-discussion:
comments: true
date: 2015-02-06 15:07:16
---

As we start the transition from the higher level aspects of CDS to analytics
using numpy, scipy, and scikit-learn, I wanted to make sure that everyone has a
relatively stable development environment.  This will ensure that you are able
to work effectively as a team and so that the code you submit is able to be
tested.

# Python #

By now, everyone should have a functional version of Python on their system.
Please check that you have a 2.7.x version of Python.  The latest version is
2.7.9.  If you have a different 2.7 version (e.g. 2.7.8 or 2.7.7), it is highly
likely that your setup is ok.  **If you have verion 3.x.x installed, please
remove it and install 2.7.9 (come see me in OH if you need help with this).**

# Virtualenv #

In HS 608 or 611, you likely installed various packages using ```pip install```
One of the issues that frequently arises when developing with Python is that
different projects you work on use different versions of libraries.  For
example, one project may have you use numpy v1.9 and another might have you use
v1.7.  

This can become difficult to manage because you will need to either manually
configure your PYTHONPATH or un/reinstall libraries when you switch projects.

[Virtualenv](https://virtualenv.pypa.io/en/latest/) is a tool that lets you
configure different Python virtual environments for each project that you work
on.  For the purpose of HS 614, you can just create a single virtualenv for the
entire class.  This will allow you to get the specific versions of packages
necessary for this class while not interfering with any personal projects or
other courses.

## Installing virtualenv for PyCharm ##

PyCharm comes bundled with virtualenv so there is nothing to install!

## Using virtualenv via PyCharm ##

**To create a virtualenv using PyCharm:**

https://www.jetbrains.com/pycharm/help/creating-virtual-environment.html

When following these instructions, be sure to unselect the **Inherit global
site-packages** checkbox so that you create a clean virtual environment that is
not dependent on existing packages that you may have installed.

**To activate a virtualenv using PyCharm:**

https://www.jetbrains.com/pycharm/help/configuring-python-interpreter-for-a-project.html

**To activate an existing virtualenv using PyCharm:**

If you have a previously created virtualenv using the command line, you can add
it to PyCharm:

https://www.jetbrains.com/pycharm/help/adding-existing-virtual-environment.html

## Installing virtualenv for Command Line ##

The recommended method for installing virtualenv is:

```
pip install virtualenv
```

(If you do not have pip installed, please follow the instructions
[here](https://pip.pypa.io/en/latest/installing.html) and run the above
command.)

## Using virtualenv via Command Line##

Virtualenv is fairly straightforward and easy to use:

1. Create a virtualenv
2. Activate the virtualenv
3. Install any packages you would like using ```pip install```
4. Activate the virtualenv anytime you want to use it in the future

### More detailed instuctions: ###

More detailed instructions can be found at:

https://virtualenv.pypa.io/en/latest/userguide.html

The following is a distilled subset.

**1. Create a virtualenv**

The first step is to create your virtual environment.

On Mac and PC:

```
virtualenv ENV
```

... where ENV is the path and name of the environment you want to create.  I would use
something like "HS-614-ENV" as the name of your environment.  The key here is that
the above command as written will create a directory structure within the
current directory in which you execute the command.  You are welcome to do this
or you may create the environment in another directory.  Personally, I highly
recommend the latter so that you can easily share the environment across all
assignments within HS 614.

For example, I would create a directory *HS614* somewhere on your computer.
*cd* into this directory and run the above command.  If you then clone the
assignment repositories into the *HS614* directory, you will have the following
directory structure:

```
HS614
|--- HS-614-ENV
|    |--- bin
|    |    |--- activate
|    |--- ... many other files/dirs generated by virtualenv
|
|--- group-X-sample-project
|    |--- ...
|
|--- group-X-lab-1
|    |--- ...
```

**2. Activate the virtualenv**

Assuming that you are following the above suggested directory structure, *cd*
into *HS614* and execute the following:

On Mac:

```
source HS-614-ENV/bin/activate
```

On PC:

```
HS-614-ENV\bin\activate
```

You will know that your environment is activated because your command prompt
will be changed to something similar to:

```
(HS-614-ENV) ~/avnguyen/HS614 $

or

(HS-614-ENV) C:\avnguyen\HS614>
```

To deactivate the virtualenv on Mac and PC:

```
deactivate
```
